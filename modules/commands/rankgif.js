//lấy 1 ảnh gif để dô cache đặt tên dưới dạng banner.gif thì lúc dùng nó mới hiện nhé
//nhớ npm i xong rồi npm i canvas rồi npm audit fix rồi mà chạy nhé
const _0x287018=_0x5a2e;function _0x2cbd(){const _0x55a0aa=['exp','cache','random','https://graph.facebook.com/','gif-encoder-2','getImage','jimp','readdirSync','toBuffer','then','rankgif','userName','image/png','mentions','exports','2135mCnbqX','2DiVvnD','beginPath','length','rankcard','regular-font.ttf','resolve','createReadStream','fillRect','bold\x2036px\x20Manrope','messageID','replace','7rrMckz','Lv.','bold\x2032px\x20Manrope','get','sort','findIndex','gif-frames','circle','sqrt','floor','makeRankCard','font','.gif','expToLevel','config','unlinkSync','6438zeOULu','62505uOClZT','end','neuquant','body','userID','loadImage','2124776MJxNgS','canvas','https://raw.githubusercontent.com/catalizcs/storage-data/master/rank/fonts/regular-font.ttf','2290wRBjaw','6GCPJFp','Gif\x20Generated','height','width','getInfo','setDelay','Manrope','getBufferAsync','center','read','normal','keys','startsWith','1.0.0','/banner.gif','22tqDYbH','getData','name','makeRankCardGif','rankcard.png','fillStyle','createCanvas','https://raw.githubusercontent.com/catalizcs/storage-data/master/rank/rank_card/rankcard.png','arc','parse','split','png','fs-extra','start','all','fillText','Bạn\x20hiện\x20không\x20có\x20trong\x20cơ\x20sở\x20dữ\x20liệu\x20nên\x20không\x20thể\x20thấy\x20thứ\x20hạng\x20của\x20mình,\x20vui\x20lòng\x20thử\x20lại\x20sau\x205\x20giây.','Lấy\x20rank\x20hiện\x20tại\x20của\x20bạn\x20trên\x20hệ\x20thống\x20bot\x20kèm\x20khung\x20theo\x20level\x20của\x20bạn,\x20remake\x20rank_card\x20from\x20canvacord','19260111GpQZQV','regular','/picture?width=512&height=512&access_token=170440784240186|bc82258eaaf93ee5b9f577a8d401bfc9','utils','bold-font.ttf','map','4016664QiNJzb','Siêu\x20Đáng\x20Yêu','503474FeudkQ','bold','forEach','createWriteStream','senderID','4584856jdcyog','/regular-font.ttf','addFrame','0123456789ABCDEF','path','finish','timeEnd','sendMessage','now','36px\x20Manrope','measureText','customrank','/cachegif/','drawImage','ext','/bold-font.ttf','getNameUser','push','getAll','/rank_','registerFont','bold\x2026px\x20Manrope','nodemodule','time','threadID','textAlign','.png','toString','fill','levelToExp','Nhóm'];_0x2cbd=function(){return _0x55a0aa;};return _0x2cbd();}(function(_0x2c82d1,_0x4a67d1){const _0x1476ef=_0x5a2e,_0x17f164=_0x2c82d1();while(!![]){try{const _0x965e68=-parseInt(_0x1476ef(0xe7))/0x1*(-parseInt(_0x1476ef(0x11b))/0x2)+-parseInt(_0x1476ef(0x141))/0x3*(-parseInt(_0x1476ef(0x13d))/0x4)+-parseInt(_0x1476ef(0x11a))/0x5*(parseInt(_0x1476ef(0x136))/0x6)+parseInt(_0x1476ef(0x126))/0x7*(parseInt(_0x1476ef(0xec))/0x8)+-parseInt(_0x1476ef(0x137))/0x9*(parseInt(_0x1476ef(0x140))/0xa)+-parseInt(_0x1476ef(0xcd))/0xb*(parseInt(_0x1476ef(0xe5))/0xc)+parseInt(_0x1476ef(0xdf))/0xd;if(_0x965e68===_0x4a67d1)break;else _0x17f164['push'](_0x17f164['shift']());}catch(_0x4289d1){_0x17f164['push'](_0x17f164['shift']());}}}(_0x2cbd,0xdc560),module[_0x287018(0x119)][_0x287018(0x134)]={'name':_0x287018(0x115),'version':_0x287018(0x14e),'hasPermssion':0x0,'credits':_0x287018(0xe6),'description':_0x287018(0xde),'commandCategory':_0x287018(0x10a),'cooldowns':0x5,'dependencies':{'fs-extra':'','path':'','jimp':'','node-superfetch':'','canvas':'','gif-frames':'','gifencoder':'','gif-encoder-2':''}});function _0x5a2e(_0x340050,_0x3cf0c7){const _0x2cbdbf=_0x2cbd();return _0x5a2e=function(_0x5a2ef2,_0x3c087b){_0x5a2ef2=_0x5a2ef2-0xcc;let _0xbf81a0=_0x2cbdbf[_0x5a2ef2];return _0xbf81a0;},_0x5a2e(_0x340050,_0x3cf0c7);}function getRandomColor(){const _0x3f3515=_0x287018;var _0x1bd14e=_0x3f3515(0xef),_0x233db2='#';for(var _0x19ed6b=0x0;_0x19ed6b<0x6;_0x19ed6b++){_0x233db2+=_0x1bd14e[Math[_0x3f3515(0x12f)](Math['random']()*0x10)];}return _0x233db2;}module[_0x287018(0x119)][_0x287018(0x130)]=async _0x355580=>{const _0x4a25e4=_0x287018,_0x3842e8=global[_0x4a25e4(0x102)][_0x4a25e4(0xd9)],_0x38030a=global[_0x4a25e4(0x102)][_0x4a25e4(0xf0)],_0x3e6927=global['nodemodule'][_0x4a25e4(0x13e)],_0x13ba58=global['nodemodule']['node-superfetch'],_0x3c72b8=_0x38030a[_0x4a25e4(0x120)](__dirname,_0x4a25e4(0x10c)),_0x4ab52a=Math['PI'],{id:_0xfc638d,name:_0x41f5a4,rank:_0x2a0a9c,level:_0x3cae92,expCurrent:_0x4af8ef,expNextLevel:_0x4397b1}=_0x355580;_0x3e6927[_0x4a25e4(0x100)](_0x3c72b8+_0x4a25e4(0xed),{'family':_0x4a25e4(0x147),'weight':'regular','style':'normal'}),_0x3e6927[_0x4a25e4(0x100)](_0x3c72b8+_0x4a25e4(0xfb),{'family':_0x4a25e4(0x147),'weight':_0x4a25e4(0xe8),'style':'normal'});const _0x5d3eb0=_0x38030a[_0x4a25e4(0x120)](__dirname,'cache',_0x4a25e4(0xf7));var _0xbe03b2=_0x3842e8['readdirSync'](_0x5d3eb0);let _0x25e273=[];files['forEach'](_0x25e5ec=>{const _0x5844fd=_0x4a25e4;_0x38030a[_0x5844fd(0xd6)](_0x25e5ec)[_0x5844fd(0xfa)]==_0x5844fd(0x106)&&_0x38030a['parse'](_0x25e5ec)[_0x5844fd(0xcf)]['startsWith'](_0x5844fd(0x11e))&&_0x25e273[_0x5844fd(0xfd)](_0x38030a[_0x5844fd(0xd6)](_0x25e5ec)['base']);;});var _0x1d4c9a=_0x3c72b8+'/'+_0x25e273[Math['floor'](Math[_0x4a25e4(0x10d)]()*_0x25e273[_0x4a25e4(0x11d)])];_0xbe03b2=_0xbe03b2[_0x4a25e4(0xe4)](_0x880f82=>_0x880f82[_0x4a25e4(0x125)](/\.png/g,''));for(singleLimit of _0xbe03b2){var _0x14d254=![];const _0x37b5c5=singleLimit[_0x4a25e4(0xd7)](/-/g);var _0x4a64cf=parseInt(_0x37b5c5[0x0]),_0x3b5c67=parseInt(_0x37b5c5[0x1]?_0x37b5c5[0x1]:_0x4a64cf);for(;_0x4a64cf<=_0x3b5c67;_0x4a64cf++){if(_0x3cae92==_0x4a64cf){_0x14d254=!![];break;}}if(_0x14d254==!![]){_0x1d4c9a=_0x5d3eb0+('/'+singleLimit+_0x4a25e4(0x106));break;}}let _0x6e679a=await _0x3e6927[_0x4a25e4(0x13c)](_0x1d4c9a);const _0x3c2380=_0x3c72b8+(_0x4a25e4(0xff)+_0xfc638d+'.png');var _0x20d08a=_0x4af8ef*0x267/_0x4397b1;if(_0x20d08a>0x267-18.5)_0x20d08a=0x267-18.5;let _0x8b6e11=await _0x13ba58[_0x4a25e4(0x129)](_0x4a25e4(0x10e)+_0xfc638d+'/picture?width=512&height=512&access_token=170440784240186|bc82258eaaf93ee5b9f577a8d401bfc9');_0x8b6e11=await this[_0x4a25e4(0x12d)](_0x8b6e11[_0x4a25e4(0x13a)]);const _0x45f257=_0x3e6927[_0x4a25e4(0xd3)](0x3a6,0x11a),_0x3ad345=_0x45f257['getContext']('2d');_0x3ad345[_0x4a25e4(0xf9)](_0x6e679a,0x0,0x0,_0x45f257[_0x4a25e4(0x144)],_0x45f257['height']),_0x3ad345[_0x4a25e4(0xf9)](await _0x3e6927[_0x4a25e4(0x13c)](_0x8b6e11),0x2d,0x32,0xb4,0xb4),_0x3ad345[_0x4a25e4(0x131)]=_0x4a25e4(0x123),_0x3ad345[_0x4a25e4(0xd2)]=getRandomColor(),_0x3ad345[_0x4a25e4(0x105)]=_0x4a25e4(0xda),_0x3ad345[_0x4a25e4(0xdc)](_0x41f5a4,0x10e,0xa4),_0x3ad345['font']=_0x4a25e4(0xf5),_0x3ad345['fillStyle']=getRandomColor(),_0x3ad345[_0x4a25e4(0x105)]='center',_0x3ad345['font']='bold\x2032px\x20Manrope',_0x3ad345['fillStyle']=getRandomColor(),_0x3ad345[_0x4a25e4(0x105)]='end',_0x3ad345[_0x4a25e4(0xdc)](_0x3cae92,0x3a6-0x37,0x52),_0x3ad345['fillStyle']=getRandomColor(),_0x3ad345[_0x4a25e4(0xdc)]('Lv.',0x3a6-0x37-_0x3ad345[_0x4a25e4(0xf6)](_0x3cae92)[_0x4a25e4(0x144)]-0xa,0x52),_0x3ad345[_0x4a25e4(0x131)]=_0x4a25e4(0x128),_0x3ad345[_0x4a25e4(0xd2)]=getRandomColor(),_0x3ad345[_0x4a25e4(0x105)]=_0x4a25e4(0x138),_0x3ad345['fillText'](_0x2a0a9c,0x3a6-0x37-_0x3ad345[_0x4a25e4(0xf6)](_0x3cae92)[_0x4a25e4(0x144)]-0x10-_0x3ad345['measureText'](_0x4a25e4(0x127))['width']-0x19,0x52),_0x3ad345[_0x4a25e4(0xd2)]=getRandomColor(),_0x3ad345[_0x4a25e4(0xdc)]('#',0x3a6-0x37-_0x3ad345[_0x4a25e4(0xf6)](_0x3cae92)[_0x4a25e4(0x144)]-0x10-_0x3ad345[_0x4a25e4(0xf6)](_0x4a25e4(0x127))[_0x4a25e4(0x144)]-0x10-_0x3ad345[_0x4a25e4(0xf6)](_0x2a0a9c)[_0x4a25e4(0x144)]-0x10,0x52),_0x3ad345['font']=_0x4a25e4(0x101),_0x3ad345[_0x4a25e4(0xd2)]=getRandomColor(),_0x3ad345['textAlign']=_0x4a25e4(0xda),_0x3ad345[_0x4a25e4(0xdc)]('/\x20'+_0x4397b1,0x2c6+_0x3ad345['measureText'](_0x4af8ef)[_0x4a25e4(0x144)]+0xa,0xa4),_0x3ad345['fillStyle']=getRandomColor(),_0x3ad345[_0x4a25e4(0xdc)](_0x4af8ef,0x2c6,0xa4),_0x3ad345[_0x4a25e4(0x11c)](),_0x3ad345[_0x4a25e4(0xd2)]=getRandomColor(),_0x3ad345[_0x4a25e4(0xd5)](0x101+18.5,147.5+18.5+36.25,18.5,1.5*_0x4ab52a,0.5*_0x4ab52a,!![]),_0x3ad345[_0x4a25e4(0x108)](),_0x3ad345['fillRect'](0x101+18.5,147.5+36.25,_0x20d08a,37.5),_0x3ad345[_0x4a25e4(0xd5)](0x101+18.5+_0x20d08a,147.5+18.5+36.25,18.75,1.5*_0x4ab52a,0.5*_0x4ab52a,![]),_0x3ad345['fill']();const _0x29cb3d=_0x45f257[_0x4a25e4(0x113)]();return _0x3842e8['writeFileSync'](_0x3c2380,_0x29cb3d),_0x3c2380;},module[_0x287018(0x119)][_0x287018(0xd0)]=async _0x1919f7=>{const _0x25e832=_0x287018,_0x2f3d49=global[_0x25e832(0x102)][_0x25e832(0xd9)],_0x2df615=global[_0x25e832(0x102)][_0x25e832(0xf0)],_0x41e92e=global['nodemodule'][_0x25e832(0x13e)],_0x4fe03a=global[_0x25e832(0x102)]['node-superfetch'],_0x330a9a=global[_0x25e832(0x102)][_0x25e832(0x10f)],_0x1c7285=global['nodemodule'][_0x25e832(0x12c)],_0x25e0d4=_0x2df615[_0x25e832(0x120)](__dirname,'cache'),_0x1485d1=Math['PI'],{id:_0x968c73,name:_0x27fdf9,rank:_0x88a5fb,level:_0x5ede15,expCurrent:_0xcb665a,expNextLevel:_0x4ad592}=_0x1919f7;_0x41e92e['registerFont'](_0x25e0d4+'/regular-font.ttf',{'family':_0x25e832(0x147),'weight':_0x25e832(0xe0),'style':_0x25e832(0x14b)}),_0x41e92e[_0x25e832(0x100)](_0x25e0d4+_0x25e832(0xfb),{'family':'Manrope','weight':_0x25e832(0xe8),'style':_0x25e832(0x14b)});const _0x4304ab=_0x2df615[_0x25e832(0x120)](__dirname,'cache','customrank');var _0x43d97c=_0x2f3d49['readdirSync'](_0x4304ab),_0x1014fa=_0x25e0d4+_0x25e832(0xcc);_0x43d97c=_0x43d97c[_0x25e832(0xe4)](_0x3de752=>_0x3de752['replace'](/\.png/g,''));for(singleLimit of _0x43d97c){var _0x44a407=![];const _0x42b422=singleLimit['split'](/-/g);var _0x117df5=parseInt(_0x42b422[0x0]),_0x2e3584=parseInt(_0x42b422[0x1]?_0x42b422[0x1]:_0x117df5);for(;_0x117df5<=_0x2e3584;_0x117df5++){if(_0x5ede15==_0x117df5){_0x44a407=!![];break;}}if(_0x44a407==!![]){_0x1014fa=_0x4304ab+('/'+singleLimit+'.png');break;}}let _0x514ca7=await _0x4fe03a[_0x25e832(0x129)](_0x25e832(0x10e)+_0x968c73+_0x25e832(0xe1));_0x514ca7=await this[_0x25e832(0x12d)](_0x514ca7['body']);var _0x5da488=_0xcb665a*0x267/_0x4ad592;if(_0x5da488>0x267-18.5)_0x5da488=0x267-18.5;async function _0x1c9d84({url:_0x11f786,imagePath:_0x488218,width:_0x9c786d,height:_0x3023a9}){const _0x356f91=_0x25e832,_0x5b258d=_0x9c786d,_0x2436a1=_0x3023a9,_0x39dd55=new _0x330a9a(_0x5b258d,_0x2436a1,_0x356f91(0x139),!![]);_0x39dd55['start'](),_0x39dd55['setRepeat'](0x0);const _0x3e5156=_0x41e92e[_0x356f91(0xd3)](_0x5b258d,_0x2436a1),_0x2de612=_0x3e5156['getContext']('2d');return new Promise((_0x558295,_0x3be0a6)=>{const _0x3fa2ec=_0x356f91;_0x1c7285({'url':_0x11f786,'frames':_0x3fa2ec(0xdb),'outputType':_0x3fa2ec(0xd8),'cumulative':!![]},function(_0x6e0c92,_0x4dab6d){const _0x56f5ea=_0x3fa2ec;if(_0x6e0c92)throw _0x6e0c92;let _0x43b70d=_0x4dab6d[_0x56f5ea(0x11d)],_0xc82060=_0x2df615[_0x56f5ea(0xd6)](_0x11f786)[_0x56f5ea(0xcf)],_0x42827a=_0x2f3d49[_0x56f5ea(0x112)](_0x25e0d4+_0x56f5ea(0xf8)),_0x2ebc66=0x0;_0x42827a[_0x56f5ea(0xe9)](_0x4a0bbf=>{const _0x29a50c=_0x56f5ea;_0x4a0bbf[_0x29a50c(0x107)]()[_0x29a50c(0x14d)](_0xc82060)&&_0x2ebc66++;;});let _0x225d49=Math[_0x56f5ea(0x12f)](_0x4dab6d['length']/0xa);_0x39dd55[_0x56f5ea(0x146)](0x64*_0x225d49);if(_0x2ebc66==_0x43b70d){async function _0x4e95da(){const _0x31d41b=_0x56f5ea;for(let _0x4004b3=0x0;_0x4004b3<_0x43b70d;_0x4004b3=_0x4004b3+_0x225d49){const _0x1670c7=await _0x41e92e[_0x31d41b(0x13c)](_0x25e0d4+_0x31d41b(0xf8)+_0xc82060+'-'+_0x4004b3+'.png');_0x2de612[_0x31d41b(0xf9)](_0x1670c7,0x0,0x0,_0x3e5156[_0x31d41b(0x144)],_0x3e5156[_0x31d41b(0x143)]),_0x2de612['drawImage'](await _0x41e92e[_0x31d41b(0x13c)](_0x514ca7),0x2d,0x32,0xb4,0xb4),_0x2de612[_0x31d41b(0x131)]=_0x31d41b(0x123),_0x2de612['fillStyle']=getRandomColor(),_0x2de612[_0x31d41b(0x105)]=_0x31d41b(0xda),_0x2de612[_0x31d41b(0xdc)](_0x27fdf9,0x10e,0xa4),_0x2de612[_0x31d41b(0x131)]=_0x31d41b(0xf5),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612[_0x31d41b(0x105)]=_0x31d41b(0x149),_0x2de612[_0x31d41b(0x131)]=_0x31d41b(0x128),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612['textAlign']=_0x31d41b(0x138),_0x2de612[_0x31d41b(0xdc)](_0x5ede15,0x3a6-0x37,0x52),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612[_0x31d41b(0xdc)]('Lv.',0x3a6-0x37-_0x2de612[_0x31d41b(0xf6)](_0x5ede15)[_0x31d41b(0x144)]-0xa,0x52),_0x2de612[_0x31d41b(0x131)]=_0x31d41b(0x128),_0x2de612['fillStyle']=getRandomColor(),_0x2de612[_0x31d41b(0x105)]=_0x31d41b(0x138),_0x2de612['fillText'](_0x88a5fb,0x3a6-0x37-_0x2de612[_0x31d41b(0xf6)](_0x5ede15)['width']-0x10-_0x2de612[_0x31d41b(0xf6)](_0x31d41b(0x127))[_0x31d41b(0x144)]-0x19,0x52),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612[_0x31d41b(0xdc)]('#',0x3a6-0x37-_0x2de612[_0x31d41b(0xf6)](_0x5ede15)[_0x31d41b(0x144)]-0x10-_0x2de612[_0x31d41b(0xf6)](_0x31d41b(0x127))[_0x31d41b(0x144)]-0x10-_0x2de612[_0x31d41b(0xf6)](_0x88a5fb)[_0x31d41b(0x144)]-0x10,0x52),_0x2de612['font']=_0x31d41b(0x101),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612[_0x31d41b(0x105)]=_0x31d41b(0xda),_0x2de612[_0x31d41b(0xdc)]('/\x20'+_0x4ad592,0x2c6+_0x2de612[_0x31d41b(0xf6)](_0xcb665a)[_0x31d41b(0x144)]+0xa,0xa4),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612['fillText'](_0xcb665a,0x2c6,0xa4),_0x2de612[_0x31d41b(0x11c)](),_0x2de612[_0x31d41b(0xd2)]=getRandomColor(),_0x2de612[_0x31d41b(0xd5)](0x101+18.5,147.5+18.5+36.25,18.5,1.5*_0x1485d1,0.5*_0x1485d1,!![]),_0x2de612['fill'](),_0x2de612[_0x31d41b(0x122)](0x101+18.5,147.5+36.25,_0x5da488,37.5),_0x2de612['arc'](0x101+18.5+_0x5da488,147.5+18.5+36.25,18.75,1.5*_0x1485d1,0.5*_0x1485d1,![]),_0x2de612[_0x31d41b(0x108)](),_0x39dd55[_0x31d41b(0xee)](_0x2de612);if(_0x4004b3+_0x225d49>_0x43b70d-0x1){let _0x4e26c5=await _0x39dd55['createReadStream']()['pipe'](_0x2f3d49['createWriteStream'](_0x488218));_0x39dd55[_0x31d41b(0xf1)](),_0x4e26c5['on']('finish',async()=>{const _0x2809aa=_0x31d41b;console[_0x2809aa(0xf2)](_0x2809aa(0x142)),_0x558295(_0x488218);});}}}_0x4e95da();}else{let _0x1bce85=0x0;_0x4dab6d[_0x56f5ea(0xe9)](async function(_0x2f1e79,_0x192ded){const _0x48f14f=_0x56f5ea;let _0x54e4ee=await _0x2f1e79[_0x48f14f(0x110)]()['pipe'](_0x2f3d49[_0x48f14f(0xea)](_0x25e0d4+_0x48f14f(0xf8)+_0xc82060+'-'+_0x2f1e79['frameIndex']+_0x48f14f(0x106)));_0x54e4ee['on'](_0x48f14f(0xf1),async()=>{const _0x17ce2b=_0x48f14f;this['count']=_0x1bce85++;if(_0x1bce85==_0x4dab6d[_0x17ce2b(0x11d)])for(let _0x3ca3e8=0x0;_0x3ca3e8<_0x1bce85;_0x3ca3e8=_0x3ca3e8+_0x225d49){const _0x4c779b=await _0x41e92e[_0x17ce2b(0x13c)](_0x25e0d4+_0x17ce2b(0xf8)+_0xc82060+'-'+_0x3ca3e8+_0x17ce2b(0x106));_0x2de612['drawImage'](_0x4c779b,0x0,0x0,_0x3e5156[_0x17ce2b(0x144)],_0x3e5156[_0x17ce2b(0x143)]),_0x2de612['drawImage'](await _0x41e92e[_0x17ce2b(0x13c)](_0x514ca7),0x2d,0x32,0xb4,0xb4),_0x2de612['font']=_0x17ce2b(0x123),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612['textAlign']=_0x17ce2b(0xda),_0x2de612[_0x17ce2b(0xdc)](_0x27fdf9,0x10e,0xa4),_0x2de612[_0x17ce2b(0x131)]=_0x17ce2b(0xf5),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0x105)]='center',_0x2de612[_0x17ce2b(0x131)]=_0x17ce2b(0x128),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0x105)]=_0x17ce2b(0x138),_0x2de612[_0x17ce2b(0xdc)](_0x5ede15,0x3a6-0x37,0x52),_0x2de612['fillStyle']=getRandomColor(),_0x2de612[_0x17ce2b(0xdc)](_0x17ce2b(0x127),0x3a6-0x37-_0x2de612['measureText'](_0x5ede15)[_0x17ce2b(0x144)]-0xa,0x52),_0x2de612[_0x17ce2b(0x131)]=_0x17ce2b(0x128),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0x105)]=_0x17ce2b(0x138),_0x2de612[_0x17ce2b(0xdc)](_0x88a5fb,0x3a6-0x37-_0x2de612[_0x17ce2b(0xf6)](_0x5ede15)[_0x17ce2b(0x144)]-0x10-_0x2de612['measureText'](_0x17ce2b(0x127))[_0x17ce2b(0x144)]-0x19,0x52),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0xdc)]('#',0x3a6-0x37-_0x2de612[_0x17ce2b(0xf6)](_0x5ede15)['width']-0x10-_0x2de612[_0x17ce2b(0xf6)](_0x17ce2b(0x127))[_0x17ce2b(0x144)]-0x10-_0x2de612[_0x17ce2b(0xf6)](_0x88a5fb)[_0x17ce2b(0x144)]-0x10,0x52),_0x2de612['font']=_0x17ce2b(0x101),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0x105)]=_0x17ce2b(0xda),_0x2de612[_0x17ce2b(0xdc)]('/\x20'+_0x4ad592,0x2c6+_0x2de612[_0x17ce2b(0xf6)](_0xcb665a)[_0x17ce2b(0x144)]+0xa,0xa4),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0xdc)](_0xcb665a,0x2c6,0xa4),_0x2de612[_0x17ce2b(0x11c)](),_0x2de612[_0x17ce2b(0xd2)]=getRandomColor(),_0x2de612[_0x17ce2b(0xd5)](0x101+18.5,147.5+18.5+36.25,18.5,1.5*_0x1485d1,0.5*_0x1485d1,!![]),_0x2de612[_0x17ce2b(0x108)](),_0x2de612[_0x17ce2b(0x122)](0x101+18.5,147.5+36.25,_0x5da488,37.5),_0x2de612['arc'](0x101+18.5+_0x5da488,147.5+18.5+36.25,18.75,1.5*_0x1485d1,0.5*_0x1485d1,![]),_0x2de612['fill'](),_0x39dd55[_0x17ce2b(0xee)](_0x2de612);if(_0x3ca3e8+_0x225d49>_0x4dab6d[_0x17ce2b(0x11d)]-0x1){let _0x393e03=await _0x39dd55[_0x17ce2b(0x121)]()['pipe'](_0x2f3d49[_0x17ce2b(0xea)](_0x488218));_0x39dd55['finish'](),_0x393e03['on'](_0x17ce2b(0xf1),async()=>{_0x558295(_0x488218);});}}});});}});});}return _0x1c9d84({'url':_0x1014fa,'imagePath':_0x25e0d4+(_0x25e832(0xff)+_0x968c73+_0x25e832(0x132)),'width':0x3a6,'height':0x11a});},module[_0x287018(0x119)][_0x287018(0x12d)]=async _0x4653d3=>{const _0x57d273=_0x287018,_0x5722c5=global[_0x57d273(0x102)][_0x57d273(0x111)];return _0x4653d3=await _0x5722c5[_0x57d273(0x14a)](_0x4653d3),_0x4653d3[_0x57d273(0x12d)](),await _0x4653d3[_0x57d273(0x148)](_0x57d273(0x117));},module['exports'][_0x287018(0x133)]=_0x4e8822=>{const _0x1c0928=_0x287018;if(_0x4e8822<0x0)return 0x0;return Math['floor']((Math[_0x1c0928(0x12e)](0x1+0x4*_0x4e8822/0x3)+0x1)/0x2);},module[_0x287018(0x119)][_0x287018(0x109)]=_0x152eba=>{if(_0x152eba<=0x0)return 0x0;return 0x3*_0x152eba*(_0x152eba-0x1);},module[_0x287018(0x119)][_0x287018(0x145)]=async(_0x568835,_0x3165d6)=>{const _0x4645fa=_0x287018;let _0x202a9b=(await _0x3165d6[_0x4645fa(0xce)](_0x568835))[_0x4645fa(0x10b)];const _0x121063=this[_0x4645fa(0x133)](_0x202a9b),_0x3fb74e=_0x202a9b-this[_0x4645fa(0x109)](_0x121063),_0xf81125=this['levelToExp'](_0x121063+0x1)-this[_0x4645fa(0x109)](_0x121063);return{'level':_0x121063,'expCurrent':_0x3fb74e,'expNextLevel':_0xf81125};},module[_0x287018(0x119)]['onLoad']=async function(){const _0x2d6600=_0x287018,{resolve:_0x215f09}=global[_0x2d6600(0x102)][_0x2d6600(0xf0)],{existsSync:_0x3cfc50,mkdirSync:_0x31913b}=global[_0x2d6600(0x102)][_0x2d6600(0xd9)],{downloadFile:_0x485fcc}=global[_0x2d6600(0xe2)],_0x29362d=_0x215f09(__dirname,_0x2d6600(0x10c),_0x2d6600(0xf7));if(!_0x3cfc50(_0x29362d))_0x31913b(_0x29362d,{'recursive':!![]});if(!_0x3cfc50(_0x215f09(__dirname,_0x2d6600(0x10c),_0x2d6600(0x11f))))await _0x485fcc(_0x2d6600(0x13f),_0x215f09(__dirname,_0x2d6600(0x10c),_0x2d6600(0x11f)));if(!_0x3cfc50(_0x215f09(__dirname,'cache',_0x2d6600(0xe3))))await _0x485fcc('https://raw.githubusercontent.com/catalizcs/storage-data/master/rank/fonts/bold-font.ttf',_0x215f09(__dirname,_0x2d6600(0x10c),_0x2d6600(0xe3)));if(!_0x3cfc50(_0x215f09(__dirname,'cache',_0x2d6600(0xd1))))await _0x485fcc(_0x2d6600(0xd4),_0x215f09(__dirname,_0x2d6600(0x10c),'rankcard.png'));},module[_0x287018(0x119)]['run']=async({event:_0x3fa9c3,api:_0x3527e4,args:_0x343435,Currencies:_0x86a55,Users:_0x16eb9f})=>{const _0xf55bdd=_0x287018,_0x75af8f=global[_0xf55bdd(0x102)][_0xf55bdd(0xd9)];let _0x4e45db=await _0x86a55[_0xf55bdd(0xfe)](['userID',_0xf55bdd(0x10b)]);const _0x5f2887=Object[_0xf55bdd(0x14c)](_0x3fa9c3[_0xf55bdd(0x118)]);_0x4e45db[_0xf55bdd(0x12a)]((_0x3c37b8,_0x1286bd)=>{const _0x23685b=_0xf55bdd;if(_0x3c37b8[_0x23685b(0x10b)]>_0x1286bd[_0x23685b(0x10b)])return-0x1;if(_0x3c37b8[_0x23685b(0x10b)]<_0x1286bd[_0x23685b(0x10b)])return 0x1;});if(_0x343435[_0xf55bdd(0x11d)]==0x0){const _0x5be8a4=_0x4e45db[_0xf55bdd(0x12b)](_0xe4d3b3=>parseInt(_0xe4d3b3[_0xf55bdd(0x13b)])==parseInt(_0x3fa9c3[_0xf55bdd(0xeb)]))+0x1,_0x49934f=global['data'][_0xf55bdd(0x116)]['get'](_0x3fa9c3['senderID'])||await _0x16eb9f[_0xf55bdd(0xfc)](_0x3fa9c3['senderID']);if(_0x5be8a4==0x0)return _0x3527e4[_0xf55bdd(0xf3)](_0xf55bdd(0xdd),_0x3fa9c3[_0xf55bdd(0x104)],_0x3fa9c3[_0xf55bdd(0x124)]);const _0x2e0a89=await this[_0xf55bdd(0x145)](_0x3fa9c3[_0xf55bdd(0xeb)],_0x86a55),_0x2a7185=Date[_0xf55bdd(0xf4)]();let _0x2c65f8=null;console[_0xf55bdd(0x103)](_0xf55bdd(0x142)),await this['makeRankCardGif']({'id':_0x3fa9c3['senderID'],'name':_0x49934f,'rank':_0x5be8a4,..._0x2e0a89})[_0xf55bdd(0x114)](_0x63d60d=>{const _0x5c3e74=_0xf55bdd;_0x3527e4['sendMessage']({'body':''+(Date['now']()-_0x2a7185),'attachment':_0x75af8f[_0x5c3e74(0x121)](_0x63d60d,{'highWaterMark':0x80*0x400})},_0x3fa9c3[_0x5c3e74(0x104)],()=>{const _0x554f18=_0x5c3e74;_0x75af8f[_0x554f18(0x135)](_0x63d60d),console['timeLog'](_0x554f18(0x142));},_0x3fa9c3[_0x5c3e74(0x124)]);});}if(_0x5f2887[_0xf55bdd(0x11d)]==0x1){const _0xa00c9c=_0x4e45db['findIndex'](_0x439596=>parseInt(_0x439596[_0xf55bdd(0x13b)])==parseInt(_0x5f2887[0x0]))+0x1,_0x6ca3c=global['data'][_0xf55bdd(0x116)][_0xf55bdd(0x129)](_0x5f2887[0x0])||await _0x16eb9f[_0xf55bdd(0xfc)](_0x5f2887[0x0]);if(_0xa00c9c==0x0)return _0x3527e4[_0xf55bdd(0xf3)](_0xf55bdd(0xdd),_0x3fa9c3['threadID'],_0x3fa9c3[_0xf55bdd(0x124)]);let _0x5b60dd=await this[_0xf55bdd(0x145)](_0x5f2887[0x0],_0x86a55),_0x591562=await this[_0xf55bdd(0x130)]({'id':_0x5f2887[0x0],'name':_0x6ca3c,'rank':_0xa00c9c,..._0x5b60dd});return _0x3527e4[_0xf55bdd(0xf3)]({'attachment':_0x75af8f['createReadStream'](_0x591562)},_0x3fa9c3[_0xf55bdd(0x104)],()=>_0x75af8f[_0xf55bdd(0x135)](_0x591562),_0x3fa9c3[_0xf55bdd(0x124)]);}if(_0x5f2887[_0xf55bdd(0x11d)]>0x1)for(const _0x18dee9 of _0x5f2887){const _0x19418a=_0x4e45db[_0xf55bdd(0x12b)](_0x31ac0e=>parseInt(_0x31ac0e[_0xf55bdd(0x13b)])==parseInt(_0x18dee9))+0x1,_0x238f99=global['data']['userName'][_0xf55bdd(0x129)](_0x18dee9)||await _0x16eb9f['getNameUser'](_0x18dee9);if(_0x19418a==0x0)return _0x3527e4[_0xf55bdd(0xf3)](_0xf55bdd(0xdd),_0x3fa9c3[_0xf55bdd(0x104)],_0x3fa9c3[_0xf55bdd(0x124)]);let _0x2f4104=await this[_0xf55bdd(0x145)](_0x18dee9,_0x86a55),_0xac6789=await this[_0xf55bdd(0x130)]({'id':_0x18dee9,'name':_0x238f99,'rank':_0x19418a,..._0x2f4104});return _0x3527e4['sendMessage']({'attachment':_0x75af8f[_0xf55bdd(0x121)](_0xac6789)},_0x3fa9c3['threadID'],()=>_0x75af8f['unlinkSync'](_0xac6789),_0x3fa9c3['messageID']);}};
